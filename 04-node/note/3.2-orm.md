# ORM

#### Object Relational Mapping

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


/**
 * Object Relational Mapping
 * 
 * 
 * 通过 ORM 框架，可以自动的吧程序中的对象和数据库关联
 * ORM 狂降会隐藏具体的数据库底层细节，让开发者使用同样的数据操作API，完成对不同数据库的操作
 */

        // ORM 利用相同的 API 操作不同的数据库
        
                             + ------------ +
                             |              |           + ------------- +
                             |              | <======>  |     mysql     |
                             |              |           + ------------- +
                             |              |
    + -------- +        + -------- +        |           + ------------- +
    |          |        |          |        | <======>  |  mysql server |
    |          |        |          |        |           + ------------- +
    |          |        |          |        |
    |   Node   | <====> |  Common  |  ORM   |           + ------------- +
    |          |        |    API   |        | <======>  |     oracle    |
    |          |        |          |        |           + ------------- +
    |          |        |          |        |
    + -------- +        + -------- +        |           + ------------- +
                             |              | <======>  |     mongodb   |
                             |              |           + ------------- +
                             |              |                ... ...
                             + ------------ +


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// ORM 优势

1) 开发者不用关心数据库，仅需关心对象

2) 可轻易完成数据库的移植

3) 无须拼接复杂的 sql语句，jishi


//- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -//


// Node 中的 ORM

1) Sequelizee( JS & TS )

2) TypeORM

3) ... ... 


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```

#### sequelizee

``` javascript
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


// sequelize 仅作为工具，还需安装对应数据库驱动

# 安装 sequelize
$ npm install --save sequelize                                  // +1

# 安装数据库驱动
$ npm install --save pg pg-hstore # Postgres
$ npm install --save mysql2                                     // +1
$ npm install --save mariadb
$ npm install --save sqlite3
$ npm install --save tedious # Microsoft SQL Server


//-------------------------------------------------------------------------------------------------------------------//


// 三层架构

                + --------------------- +    
                |                       |
                |        Route          |           // 路由层
                |                       |           // 提供对外的 API 访问接口
                + --------------------- +    
                         /||\
                          ||
                         \||/
                + --------------------- +
                |                       |
                |       Service         |           // 服务层
                |                       |           // 提供业务逻辑的支持
                + --------------------- +
                         /||\
                          ||
                         \||/
                + --------------------- +
                |                       |
                |       DAO/DAL         |           // 数据访问层
                |                       |           // 提供与数据库或其他持久设备的通信，通常称为 ORM
                + --------------------- +


//-------------------------------------------------------------------------------------------------------------------//


/**
 * 一个完整的系统，最终的验证一定在服务器
 * 
 * 
 * 
 */

1) 客户端: 用户体验验证( Browser, app, pad, miniprigram )

2) 服务器: 业务逻辑层验证( 为了业务逻辑的 完整性，安全性 )

3) 数据库: 为了保证数据的 完整性


///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
```









